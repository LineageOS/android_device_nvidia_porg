{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e5f0469b_fac0d213",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31706
      },
      "writtenOn": "2022-09-10T15:26:40Z",
      "side": 1,
      "message": "This is the final change required to support intel 8265 on porg devices. It depends on changes I33d72d46acaa9b493a623dcb76bf8cadbe135471 and I3764973c388bf9c69adb1fd5e147582345e2edcd\n\nThe firmware files were extracted from jetson nano offical sdcard image. For now I only added the 8265 firmware since it is the only one I have to test.",
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "096ecc3c_d0bb09cb",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14048
      },
      "writtenOn": "2022-09-10T15:39:31Z",
      "side": 1,
      "message": "Couple things here. Don\u0027t think we can include the firmware directly here. Will have to do something like reference linux-firmware. I\u0027ve considered pulling that \nrepo for other reasons to. I\u0027m a bit busy atm, but I can look into that in a couple days. The other thing is that the policy should get added to device/nvidia/sepolicy directly. Normally I would want device specific stuff added to the device like this, but the lspci stuff will likely be too good for me to pass up using on other devices like xavier nx and such. So it\u0027ll be good to have in the vendor wide policy.",
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "106764cf_e54303ab",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31706
      },
      "writtenOn": "2022-09-10T19:44:07Z",
      "side": 1,
      "message": "\u003e Couple things here. Don\u0027t think we can include the firmware directly here. Will have to do something like reference linux-firmware. I\u0027ve considered pulling that \nrepo for other reasons to. I\u0027m a bit busy atm, but I can look into that in a couple days.\n\nStill finding my way around android build system, but I assume you mean linux-firmware should be added to https://github.com/LineageOS/android/blob/lineage-19.1/default.xml . If so, can I just send a patch for this?\n\n\u003e The other thing is that the policy should get added to device/nvidia/sepolicy directly. Normally I would want device specific stuff added to the device like this, but the lspci stuff will likely be too good for me to pass up using on other devices like xavier nx and such. So it\u0027ll be good to have in the vendor wide policy.\n\nOK, so I will move the sysfs pci access rules to the common repo. What about the rule which allows the kernel to read firmware from fs? Should it also be moved there?",
      "parentUuid": "096ecc3c_d0bb09cb",
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "29b7368f_68fcc352",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14048
      },
      "writtenOn": "2022-09-10T20:57:25Z",
      "side": 1,
      "message": "Should be able to label the firmware like the bcm firmware is labelled in the main tegra policy repo, then the already existing rules should work. And not certain why lspci wouldn\u0027t just need access to the sysfs_pci_device nodes. But yes, I\u0027d put all the policy stuff into the common tegra part of the nvidia sepolicy repo.\n\nAnd no, the linux-firmware repo would not be added to the default manifest. It would be added to the foster or tegra-common lineage.dependencies, depending on where the module targets are added. I would probably add the targets in tegra-common, then install them from foster. To allow for flexibility to install them on galen for the xavier nx, for example. You can look at the realtek support in tegra-common and galen for a more clear reference example. Put linux-firmware in kernel/nvidia/linux-firmware, then have makefiles in tegra-common reference that. All of which pretty much eliminates any change to the porg repo.",
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "00ab47d4_848e070f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31706
      },
      "writtenOn": "2022-09-10T21:50:56Z",
      "side": 1,
      "message": "\u003e And not certain why lspci wouldn\u0027t just need access to the sysfs_pci_device nodes. But yes\n\nNot sure about that either, but lspci fails if I remove the sysfs nodes\n\n\u003e But yes, I\u0027d put all the policy stuff into the common tegra part of the nvidia sepolicy repo.\n\nI\u0027ve put the lkm_loader rules in the already existing file on t210/common/vendor/lkm_loader.te, since that\u0027s where the lkm_loader type is defined. The read firmware rule I\u0027ve put on tegra/common/vendor/kernel.te\n\n\u003e And no, the linux-firmware repo would not be added to the default manifest. It would be added to the foster or tegra-common lineage.dependencies, depending on where the module targets are added. I would probably add the targets in tegra-common, then install them from foster. To allow for flexibility to install them on galen for the xavier nx, for example. You can look at the realtek support in tegra-common and galen for a more clear reference example. Put linux-firmware in kernel/nvidia/linux-firmware, then have makefiles in tegra-common reference that. All of which pretty much eliminates any change to the porg repo.\n\nI will give it a shot",
      "parentUuid": "29b7368f_68fcc352",
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a38edb33_122ab4ae",
        "filename": "sepolicy/porg.te",
        "patchSetId": 1
      },
      "lineNbr": 3,
      "author": {
        "id": 25732
      },
      "writtenOn": "2022-09-10T15:47:21Z",
      "side": 1,
      "message": "Label the files it wants to access",
      "range": {
        "startLine": 3,
        "startChar": 13,
        "endLine": 3,
        "endChar": 24
      },
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3963e52f_2d79dd67",
        "filename": "sepolicy/porg.te",
        "patchSetId": 1
      },
      "lineNbr": 3,
      "author": {
        "id": 31706
      },
      "writtenOn": "2022-09-10T19:44:07Z",
      "side": 1,
      "message": "I\u0027m very new to SELinux. I assume you mean it is possible to specify which files are allowed, can you advise on how to do that?",
      "parentUuid": "a38edb33_122ab4ae",
      "range": {
        "startLine": 3,
        "startChar": 13,
        "endLine": 3,
        "endChar": 24
      },
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56091bc0_25bd435d",
        "filename": "sepolicy/porg.te",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 25732
      },
      "writtenOn": "2022-09-10T15:47:21Z",
      "side": 1,
      "message": "Label the nodes it wants to access",
      "range": {
        "startLine": 8,
        "startChar": 17,
        "endLine": 8,
        "endChar": 22
      },
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "755271a5_547675fa",
        "filename": "sepolicy/porg.te",
        "patchSetId": 1
      },
      "lineNbr": 8,
      "author": {
        "id": 31706
      },
      "writtenOn": "2022-09-10T19:44:07Z",
      "side": 1,
      "message": "I assume you mean I should be more specific in the rule vs allowing access to the whole sysfs. Since this is for lspci, won\u0027t it need access to everything under /sys in order to discover the device nodes?",
      "parentUuid": "56091bc0_25bd435d",
      "range": {
        "startLine": 8,
        "startChar": 17,
        "endLine": 8,
        "endChar": 22
      },
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "217617ff_07c7a4ed",
        "filename": "sepolicy/porg.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 25732
      },
      "writtenOn": "2022-09-10T15:47:21Z",
      "side": 1,
      "message": "ditto",
      "range": {
        "startLine": 9,
        "startChar": 17,
        "endLine": 9,
        "endChar": 22
      },
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fac80d85_17543ffd",
        "filename": "sepolicy/porg.te",
        "patchSetId": 1
      },
      "lineNbr": 9,
      "author": {
        "id": 31706
      },
      "writtenOn": "2022-09-10T19:44:07Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "217617ff_07c7a4ed",
      "range": {
        "startLine": 9,
        "startChar": 17,
        "endLine": 9,
        "endChar": 22
      },
      "revId": "cd38a5be39229d743a3415c6a7d9ef7f19707bf5",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ]
}